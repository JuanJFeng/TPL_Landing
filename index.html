<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The Pink Lemonade</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/png" href="assets/favico.png">
</head>

<body>
  <div class="nav">
    <div class="logo">
      <img src="assets/TPL_logo.png" alt="The Pink Lemonade Logo" class="logo-img">
    </div>

    <div class="password">
      <button id="passwordBtn">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px"
          viewBox="0 0 512 640" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="20" height="20">
          <g>
            <path
              d="M405.333,179.712v-30.379C405.333,66.859,338.475,0,256,0S106.667,66.859,106.667,149.333v30.379 c-38.826,16.945-63.944,55.259-64,97.621v128C42.737,464.214,90.452,511.93,149.333,512h213.333 c58.881-0.07,106.596-47.786,106.667-106.667v-128C469.278,234.971,444.159,196.657,405.333,179.712z M277.333,362.667 c0,11.782-9.551,21.333-21.333,21.333c-11.782,0-21.333-9.551-21.333-21.333V320c0-11.782,9.551-21.333,21.333-21.333 c11.782,0,21.333,9.551,21.333,21.333V362.667z M362.667,170.667H149.333v-21.333c0-58.91,47.756-106.667,106.667-106.667 s106.667,47.756,106.667,106.667V170.667z" />
          </g>
        </svg>
        Enter using password
      </button>
    </div>
  </div>

  <div class="main-content">

    <div class="center-content">
      <img src="assets/logo 3x3cm.png" alt="The Pink Lemonade Logo" class="logo-img">
      <p class="coming-soon">The online store is opening soon.</p>
    </div>

    <div class="newsletter">
      <p class="signup" id="desktop-signup">Sign up to be the first to access our upcoming releases</p>
      <p class="signup" id="mobile-signup">Sign up to be the first 
        <br>to access our upcoming releases</p>
      <form id="subscribe-form" class="subscribe-form">
        <div class="input-wrapper">
          <input type="email" id="email" placeholder="Email Address" required>
          <button type="submit">SUBSCRIBE</button>
        </div>
      </form>
      <p id="form-message"></p>
    </div>
  </div>

  <div id="passwordModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <p class="signup">Enter Store using password:</p>

      <form class="password-form">
        <div class="input-wrapper">
          <input type="password" id="passwordInput" placeholder="Password" required>
          <button id="enterPasswordBtn" type="button">Enter</button>
        </div>
      </form>

      <p id="errorMessage" class="error-message">Incorrect password. Please try again.</p>
    </div>
  </div>

  <script>
    // Password
    const correctPassword = "1234";

    // Get the modal elements
    const modal = document.getElementById("passwordModal");
    const btn = document.getElementById("passwordBtn");
    const span = document.getElementsByClassName("close")[0];
    const enterPasswordBtn = document.getElementById("enterPasswordBtn");
    const passwordInput = document.getElementById("passwordInput");
    const errorMessage = document.getElementById("errorMessage");

    // Open the modal on button click
    btn.onclick = function () {
      modal.style.display = "flex";
      passwordInput.focus();
      resetModalState();
    }

    // Close the modal when clicking X
    span.onclick = function () {
      closeModal();
    }

    // Close the modal when clicking outside
    window.onclick = function (event) {
      if (event.target == modal) {
        closeModal();
      }
    }

    window.ontouchstart = function (event) {
      if (event.target == modal) {
        closeModal();
      }
    }

    // Handle modal close and reset
    function closeModal() {
      modal.style.display = "none";
      resetModalState();
    }

    // Reset error message and password input
    function resetModalState() {
      errorMessage.classList.remove("visible");
      errorMessage.textContent = "";
      errorMessage.style.visibility = "hidden";
      passwordInput.value = "";
    }

    // Validate password 
    enterPasswordBtn.onclick = function () {
      const enteredPassword = passwordInput.value.trim();

      // Check if the input is empty
      if (enteredPassword === "") {
        showErrorMessage("Please enter a password.");
        return;
      }

      // Validate password 
      if (enteredPassword === correctPassword) {
        window.location.href = "https://www.francescovullo.com/";
      } else {
        showErrorMessage("Incorrect password. Please try again.");
      }
    }

    // Show error message
    function showErrorMessage(message) {
      errorMessage.classList.add("visible");
      errorMessage.textContent = message;
      errorMessage.style.visibility = "visible";
      passwordInput.value = "";
    }

    // Brevo
    document.getElementById("subscribe-form").addEventListener("submit", function (event) {
      event.preventDefault();  // Prevent default form submission

      var email = document.getElementById("email").value;

      var data = {
        email: email,
        listIds: [2],  // Replace with your Brevo list ID
        updateEnabled: false
      };

      fetch('https://api.brevo.com/v3/contacts', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'api-key': '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'  // Replace with your Brevo API key
        },
        body: JSON.stringify(data)
      })
        .then(response => response.json())
        .then(data => {
          if (data.id) {
            document.getElementById("form-message").textContent = "Subscription successful!";
          } else {
            document.getElementById("form-message").textContent = "An error occurred. Please try again.";
          }
        })
        .catch((error) => {
          document.getElementById("form-message").textContent = "Error: " + error.message;
        });
    });


  </script>
</body>

</html>